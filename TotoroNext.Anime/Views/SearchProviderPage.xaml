<Page
    x:Class="TotoroNext.Anime.Views.SearchProviderPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:TotoroNext.Anime.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:taa="using:TotoroNext.Anime.Abstractions"
    xmlns:utu="using:Uno.Toolkit.UI"
    xmlns:uen="using:Uno.Extensions.Navigation.UI"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
    mc:Ignorable="d">

    <Grid Margin="36">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <AutoSuggestBox Text="{Binding Query, Mode=TwoWay}"/>

        <ListView ItemsSource="{Binding Items}" Grid.Row="1"
                  uen:Navigation.Request="FindEpisodesViewModel">
            <ListView.ItemTemplate>
                <DataTemplate x:DataType="taa:SearchResult">
                    <utu:Card
                        AutomationProperties.AutomationId="Elevated_Card_Media_Content"
                        HeaderContent="{Binding Title}"
                        MediaContent="{Binding Image}"
                        Style="{StaticResource ElevatedCardStyle}">
                        <utu:Card.HeaderContentTemplate>
                            <DataTemplate>
                                <TextBlock
                                    Margin="16,14,16,0"
                                    Style="{ThemeResource SubtitleTextBlockStyle}"
                                    Text="{Binding}"
                                    TextTrimming="CharacterEllipsis"/>
                            </DataTemplate>
                        </utu:Card.HeaderContentTemplate>
                        <utu:Card.MediaContentTemplate>
                            <DataTemplate>
                                <Image
                                    MaxHeight="500"
                                    Source="{Binding}"
                                    Stretch="Uniform" />
                            </DataTemplate>
                        </utu:Card.MediaContentTemplate>
                    </utu:Card>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </Grid>
</Page>
